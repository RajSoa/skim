var Parsimmon=function(n){var r=function(n,r,t){function e(n){return typeof n==="object"}function u(n){return typeof n==="function"}function i(){}function c(f,o){if(o===t){o=f;f=Object}function a(){var n=new s;if(u(n.init))n.init.apply(n,arguments);return n}function s(){}a.Bare=s;var v=i[n]=f[n];var h=s[n]=a[n]=new i;var l;h.constructor=a;a.mixin=function(r){s[n]=a[n]=c(a,r)[n];return a};return(a.open=function(n){l={};if(u(n)){l=n.call(a,h,v,a,f)}else if(e(n)){l=n}if(e(l)){for(var t in l){if(r.call(l,t)){h[t]=l[t]}}}if(!u(h.init)){h.init=f}return a})(o)}return c}("prototype",{}.hasOwnProperty);var t={};t.Parser=r(function(n,r,e){function u(n,r){if(n){n="'"+n+"'"}else{n="EOF"}throw"Parse Error: "+r+" at "+n}n.init=function(n){this._=n};n.parse=function(n){return this.skip(y)._(n,r,u);function r(n,r){return r}};n.or=function(n){var r=this;return e(function(t,e,u){return r._(t,e,i);function i(r){return n._(t,e,u)}})};n.then=function(n){var r=this;return e(function(t,u,i){return r._(t,c,i);function c(r,t){var c=n instanceof e?n:n(t);return c._(r,u,i)}})};n.many=function(){var n=this;return e(function(r,t,e){var u=[];while(n._(r,i,c));return t(r,u);function i(n,t){r=n;u.push(t);return true}function c(){return false}})};n.times=function(n,r){if(arguments.length<2)r=n;var t=this;return e(function(e,u,i){var c=[];var f=true;var o;for(var a=0;a<n;a+=1){f=t._(e,s,v);if(!f)return i(e,o)}for(;a<r&&f;a+=1){f=t._(e,s,h)}return u(e,c);function s(n,r){c.push(r);e=n;return true}function v(n,r){o=r;e=n;return false}function h(n,r){return false}})};n.result=function(n){return this.then(f(n))};n.atMost=function(n){return this.times(0,n)};n.atLeast=function(n){var r=this;return r.times(n).then(function(n){return r.many().map(function(r){return n.concat(r)})})};n.map=function(n){return this.then(function(r){return f(n(r))})};n.skip=function(n){return this.then(function(r){return n.result(r)})};var i=t.string=function(n){var r=n.length;var t="expected '"+n+"'";return e(function(e,u,i){var c=e.slice(0,r);if(c===n){return u(e.slice(r),c)}else{return i(e,t)}})};var c=t.regex=function(n){if(n.source[0]!=="^")throw"regex "+n+" must be anchored";var r="expected "+n;return e(function(t,e,u){var i=n.exec(t);if(i){var c=i[0];return e(t.slice(c.length),c)}else{return u(t,r)}})};var f=t.succeed=function(n){return e(function(r,t){return t(r,n)})};var o=t.fail=function(n){return e(function(r,t,e){return e(r,n)})};var a=t.letter=c(/^[a-z]/i);var s=t.letters=c(/^[a-z]*/i);var v=t.digit=c(/^[0-9]/);var h=t.digits=c(/^[0-9]*/);var l=t.whitespace=c(/^\s+/);var p=t.optWhitespace=c(/^\s*/);var m=t.any=e(function(n,r,t){if(!n)return t(n,"expected any character");return r(n.slice(1),n.charAt(0))});var g=t.all=e(function(n,r,t){return r("",n)});var y=t.eof=e(function(n,r,t){if(n)return t(n,"expected EOF");return r(n,n)})});return t}();